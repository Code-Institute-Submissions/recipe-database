{% extends 'base.html'%} {% block content %}

<h1>{{recipe.recipe_title}}</h1>

<div  class= "row">
                
    <!--Buttons, illustration and information about the recipe-->
    <div class="col l4">

        <!--Button to edit a recipe-->
            <a href="{{url_for('edit_recipe', recipe_id=recipe._id)}}" class="waves-effect waves-light btn teal">
                <i class="material-icons right">edit</i>Edit</a>
                            
        <!--Button to delete a recipe-->
            <a href="{{url_for('delete_recipe', recipe_id=recipe._id)}}" class="waves-effect waves-light btn teal">
                <i class="material-icons right">delete</i>Delete</a>
    
                <!--If the DELETE RECIPE button is clicked, a warning appears-->
                {% with messages = get_flashed_messages() %} {% if messages %}
                    {% for message in messages %}
                                
                    <p id="flash">{{ message }}</p>
                                
                    <!--Clicking this button confirms the deletion-->
                    <form action="{{url_for('delete_recipe', recipe_id=recipe._id)}}" method="POST">
                    <button type="submit" class="waves-effect waves-light btn teal">
                        <i class="material-icons right">check</i>Confirm</button>
                    </form>
                                
                    <!--Clicking this button cancels the deletion-->
                    <form action="{{url_for('show_recipe')}}" method="POST">
                    <button type="submit" class="waves-effect waves-light btn teal">
                        <i class="material-icons right">close</i>Cancel</button>
                    </form>
                                
                    {% endfor %}
                {% endif %} {% endwith %} <!--End of loop through flashed messages-->
                    
        <!--Recipe illustration-->
        <!--The image paths are stored in the database, and this code pulls the correct image for the recipe into the template-->
        <img class="illustration" src="{{recipe.image_path}}" title="{{recipe.recipe_title}}" alt="{{recipe.recipe_title}}"></a>
                    
        <!--Information about the recipe-->
        <div id="information">
                        
            <!--Optional text to display if the recipe contains allergens-->
            {% if recipe.allergens %}
                Contains {{recipe.allergens}}<br>
            {% endif %}
    
            <!--Optional text to display if the recipe is gluten-free-->
            {% if recipe.gluten_free %}
                Gluten-free<br>
            {% endif %}
    
            <!--Optional text to display if the recipe is suitable for vegetarians-->
            {% if recipe.vegetarian and not recipe.vegan %}
                Suitable for vegetarians<br>
            {% endif %}
                    
            <!--Optional text to display if the recipe is suitable for vegans-->
            {% if recipe.vegan %}
                Suitable for vegans and vegetarians<br> <!--If it's suitable for vegans, it's also suitable for vegetarians-->
            {% endif %}    
        
            <!--Optional text for the recipe's author-->
            {% if recipe.author %}
                <em>Author:</em> {{recipe.author}}<br>
            {% endif %}
    
            <!--The recipe's category-->
            <em>Category:</em> {{recipe.category_name}} <br>
                        
            <!--Optional text for the recipe's country of origin-->
            {% if recipe.origin %}
                <em>Country of Origin:</em> {{recipe.origin}}<br>
            {% endif %}
                            
            <!--Optional text for number of servings-->
            {% if recipe.servings %}
                <em>Serves:</em> {{recipe.servings}}<br>
            {% endif %}
                            
            <!--Optional text for ingredient preparation time-->
            {% if recipe.prep_time %}
                <em>Preparation Time:</em> {{recipe.prep_time}}<br>
            {% endif %}
            
            <!--Optional text for any extra time-->
            {% if recipe.extra_time %}
                <em>Extra Time:</em> {{recipe.extra_time}}<br>
            {% endif %}
                        
            <!--Optional text for ime needed to cook the recipe-->
            {% if recipe.cook_time %}
                <em>Cook Time:</em> {{recipe.cook_time}} </p>
            {% endif %}
                        
        </div> <!--End of information text-->
                    
    </div> <!--End of first column-->
    
    <!--Ingredients-->
    <div class="col  l4" id="ingredients">
    <h2>Ingredients</h2>
        <pre>{{recipe.ingredients}}</pre> <!--The pre tag preserves the line breaks in the text from MongoDB-->
    </div> <!--End of ingredients-->
                    
    <!--Preparation instructions-->
    <div class="col  l4" id="method">
        <h2>Method</h2>
        <pre>{{recipe.method}}</pre> <!--The pre tag preserves the line breaks in the text from MongoDB-->
    </div> <!--End of preparation instructions-->
                
</div> <!--End of recipe-->
            
{% endblock %}